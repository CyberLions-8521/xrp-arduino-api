<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>XRP-Arduino-Project: PicoEncoder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">XRP-Arduino-Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_pico_encoder-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">PicoEncoder Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>High resolution quadrature encoder using the PIO on the RP2040.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_pico_encoder_8h_source.html">PicoEncoder.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6a1ee2e5e8c27f9a8964fa981629c412" id="r_a6a1ee2e5e8c27f9a8964fa981629c412"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a1ee2e5e8c27f9a8964fa981629c412">PicoEncoder</a> ()</td></tr>
<tr class="separator:a6a1ee2e5e8c27f9a8964fa981629c412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a708bd32f90635b509a8d7c202ae6e131" id="r_a708bd32f90635b509a8d7c202ae6e131"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a708bd32f90635b509a8d7c202ae6e131">begin</a> (int firstPin, uint resolution=1, bool pullUp=true)</td></tr>
<tr class="separator:a708bd32f90635b509a8d7c202ae6e131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a753155cc3ce5f203e38a34a557b717b1" id="r_a753155cc3ce5f203e38a34a557b717b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a753155cc3ce5f203e38a34a557b717b1">update</a> (void)</td></tr>
<tr class="separator:a753155cc3ce5f203e38a34a557b717b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bfe78be020bac9ae01d7df955ce655c" id="r_a8bfe78be020bac9ae01d7df955ce655c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8bfe78be020bac9ae01d7df955ce655c">measurePhases</a> (void)</td></tr>
<tr class="separator:a8bfe78be020bac9ae01d7df955ce655c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2880170e8e1fb0c0f5243b8084bd397d" id="r_a2880170e8e1fb0c0f5243b8084bd397d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2880170e8e1fb0c0f5243b8084bd397d">setPhases</a> (int phases)</td></tr>
<tr class="separator:a2880170e8e1fb0c0f5243b8084bd397d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1a432a73377e2e6dd7a315dc1c194d3" id="r_aa1a432a73377e2e6dd7a315dc1c194d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1a432a73377e2e6dd7a315dc1c194d3">setConversionFactor</a> (double conversionFactor)</td></tr>
<tr class="separator:aa1a432a73377e2e6dd7a315dc1c194d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58320ec8ef7b53a415c24c6c985db27f" id="r_a58320ec8ef7b53a415c24c6c985db27f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a58320ec8ef7b53a415c24c6c985db27f">setResolution</a> (uint resolution)</td></tr>
<tr class="separator:a58320ec8ef7b53a415c24c6c985db27f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c341241c92ea354dd66d781ff6fe352" id="r_a9c341241c92ea354dd66d781ff6fe352"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9c341241c92ea354dd66d781ff6fe352">getPosition</a> () const</td></tr>
<tr class="separator:a9c341241c92ea354dd66d781ff6fe352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a169bd1794cdea4756db611ed155ef4e2" id="r_a169bd1794cdea4756db611ed155ef4e2"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a169bd1794cdea4756db611ed155ef4e2">getSpeed</a> () const</td></tr>
<tr class="separator:a169bd1794cdea4756db611ed155ef4e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>High resolution quadrature encoder using the PIO on the RP2040. </p>
<dl class="section author"><dt>Author</dt><dd>Paulo Marques </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0.9 </dd></dl>
<p>The two phases (channels A and B) of the encoder must be connected to consecutive pins. Note that the pins must be consecutive in the RP2040 and may not correspond to consecutive numbers in the Arduino mapping. For instance, on the Arduino Nano RP2040 board, pins D2 and D3 are GPIO25 and GPIO15, so they can not be used for this purpose. However, pin D4 is GPIO16, which means pins D3 and D4 could be used to connect the encoder </p>

<p class="definition">Definition at line <a class="el" href="_pico_encoder_8h_source.html#l00029">29</a> of file <a class="el" href="_pico_encoder_8h_source.html">PicoEncoder.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6a1ee2e5e8c27f9a8964fa981629c412" name="a6a1ee2e5e8c27f9a8964fa981629c412"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a1ee2e5e8c27f9a8964fa981629c412">&#9670;&#160;</a></span>PicoEncoder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PicoEncoder::PicoEncoder </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_pico_encoder.html" title="High resolution quadrature encoder using the PIO on the RP2040.">PicoEncoder</a> constructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a708bd32f90635b509a8d7c202ae6e131" name="a708bd32f90635b509a8d7c202ae6e131"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a708bd32f90635b509a8d7c202ae6e131">&#9670;&#160;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PicoEncoder::begin </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>firstPin</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint</td>          <td class="paramname"><span class="paramname"><em>resolution</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>pullUp</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The method also sets the pins as inputs and will turn on the pull-ups on the pins if "pullUp" is true. Many encoders have open-collector outputs and require pull-ups. If unsure, leave the default value of <code>true</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">firstPin</td><td>The pin for Channel A of the encoder. It must be the smaller of two consectuve pins. </td></tr>
    <tr><td class="paramname">resolution</td><td>The resolution of the encoder (i.e., the number of encoder counts per one revolution). The default value is 1 tick per revolution. </td></tr>
    <tr><td class="paramname">pullUp</td><td>(Optional) Whether or not to use the internal pullup resistor of the board. Defaulted to <code>true</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 if there is no PIO available, -2 if there are too many encoder instances </dd></dl>

</div>
</div>
<a id="a9c341241c92ea354dd66d781ff6fe352" name="a9c341241c92ea354dd66d781ff6fe352"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c341241c92ea354dd66d781ff6fe352">&#9670;&#160;</a></span>getPosition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double PicoEncoder::getPosition </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the position of the encoder. The default unit is revolutions or rotations (of the wheel). The units returned can be changed by the conversion factor. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="#aa1a432a73377e2e6dd7a315dc1c194d3">setConversionFactor</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The position of the encoder in units given by the conversion factor. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_pico_encoder_8h_source.html#l00117">117</a> of file <a class="el" href="_pico_encoder_8h_source.html">PicoEncoder.h</a>.</p>

</div>
</div>
<a id="a169bd1794cdea4756db611ed155ef4e2" name="a169bd1794cdea4756db611ed155ef4e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a169bd1794cdea4756db611ed155ef4e2">&#9670;&#160;</a></span>getSpeed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double PicoEncoder::getSpeed </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the speed of the encoder. The default units are in rotations per minute (RPM), but can be modified by the conversion factor. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="#aa1a432a73377e2e6dd7a315dc1c194d3">setConversionFactor</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The speed of the encoder. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_pico_encoder_8h_source.html#l00128">128</a> of file <a class="el" href="_pico_encoder_8h_source.html">PicoEncoder.h</a>.</p>

</div>
</div>
<a id="a8bfe78be020bac9ae01d7df955ce655c" name="a8bfe78be020bac9ae01d7df955ce655c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bfe78be020bac9ae01d7df955ce655c">&#9670;&#160;</a></span>measurePhases()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PicoEncoder::measurePhases </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Measure the relative phase sizes of the encoder. On success returns a positive number that represents the sizes (and can be passed later to setPhases to calibrate the phase sizes). On failure returns a negative number: </p><ul>
<li>
-1 : speed too slow (less than 20 raw steps per second) </li>
<li>
-2 : speed too high (while measuring the current step jumped by more than one, so either the encoder is rotating to fast or some interrupt routine is interrupting the code long enough to lose steps) </li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>The relative phase (positive number), -1, or -2. </dd></dl>

</div>
</div>
<a id="aa1a432a73377e2e6dd7a315dc1c194d3" name="aa1a432a73377e2e6dd7a315dc1c194d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1a432a73377e2e6dd7a315dc1c194d3">&#9670;&#160;</a></span>setConversionFactor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PicoEncoder::setConversionFactor </td>
          <td>(</td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>conversionFactor</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets the conversion factor to multiply the encouder position by.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conversionFactor</td><td>The factor to multiply the encouder position. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_pico_encoder_8h_source.html#l00092">92</a> of file <a class="el" href="_pico_encoder_8h_source.html">PicoEncoder.h</a>.</p>

</div>
</div>
<a id="a2880170e8e1fb0c0f5243b8084bd397d" name="a2880170e8e1fb0c0f5243b8084bd397d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2880170e8e1fb0c0f5243b8084bd397d">&#9670;&#160;</a></span>setPhases()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PicoEncoder::setPhases </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>phases</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the phase sizes of the encoder. You can determine the appropriate phase size using <code>measurePhases</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phases</td><td>The relative phase size of the encoder. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a58320ec8ef7b53a415c24c6c985db27f" name="a58320ec8ef7b53a415c24c6c985db27f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58320ec8ef7b53a415c24c6c985db27f">&#9670;&#160;</a></span>setResolution()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PicoEncoder::setResolution </td>
          <td>(</td>
          <td class="paramtype">uint</td>          <td class="paramname"><span class="paramname"><em>resolution</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets the resolution of the encoder. This should be in units of encoder ticks per revolution/rotation of the wheel (or shaft the encoder is mounted on).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resolution</td><td>The resolution of the encoder in encoder counts per revolution. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_pico_encoder_8h_source.html#l00104">104</a> of file <a class="el" href="_pico_encoder_8h_source.html">PicoEncoder.h</a>.</p>

</div>
</div>
<a id="a753155cc3ce5f203e38a34a557b717b1" name="a753155cc3ce5f203e38a34a557b717b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a753155cc3ce5f203e38a34a557b717b1">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PicoEncoder::update </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method must be called within <code>loop</code> to properly updated the encoder readings. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>xrp-arduino/src/<a class="el" href="_pico_encoder_8h_source.html">PicoEncoder.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
